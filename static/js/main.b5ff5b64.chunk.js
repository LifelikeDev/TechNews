(this.webpackJsonpinitiative=this.webpackJsonpinitiative||[]).push([[0],{12:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),r=a(5),s=a.n(r),i=(a(12),a(1)),o=a(4),l=a.n(o),j=a(6),b=a(7),u="SET_LOADING",h="SET_STORIES",d="HIDE_STORY",p="HANDLE_PAGE",O="SEARCH_STORY",x="FETCH_FAILED",g=function(e,t){switch(t.type){case u:return Object(i.a)(Object(i.a)({},e),{},{isLoading:!0});case h:return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1,hits:t.payload.hits,nbPages:t.payload.nbPages});case x:return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1,cannotFetch:!0});case d:return Object(i.a)(Object(i.a)({},e),{},{hits:e.hits.filter((function(e){return e.objectID!==t.payload}))});case O:return Object(i.a)(Object(i.a)({},e),{},{query:t.payload,page:0});case p:if("increase"===t.payload){var a=e.page+1;return a>e.nbPages-1&&(a=0),Object(i.a)(Object(i.a)({},e),{},{page:a})}if("decrease"===t.payload){var c=e.page-1;return c<0&&(c=e.nbPages-1),Object(i.a)(Object(i.a)({},e),{},{page:c})}break;default:throw new Error('no matching "'.concat(t.type,'" action type'))}},f=a(0),y={isLoading:!0,cannotFetch:!1,hits:[],query:"",page:0,nbPages:0},m=n.a.createContext(),v=function(e){var t=e.children,a=Object(c.useReducer)(g,y),n=Object(b.a)(a,2),r=n[0],s=n[1],o=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:u}),e.prev=1,e.next=4,fetch(t);case 4:return a=e.sent,e.next=7,a.json();case 7:c=e.sent,s({type:h,payload:{hits:c.hits,nbPages:c.nbPages}}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),s({type:x});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){o("".concat("https://hn.algolia.com/api/v1/search?","query=").concat(r.query,"&page=").concat(r.page))}),[r.query,r.page]),Object(f.jsx)(m.Provider,{value:Object(i.a)(Object(i.a)({},r),{},{hideStory:function(e){s({type:d,payload:e})},searchStory:function(e){s({type:O,payload:e})},pageSwitch:function(e){s({type:p,payload:e})}}),children:t})},N=function(){return Object(c.useContext)(m)},w=function(){var e=N(),t=e.query,a=e.searchStory;return Object(f.jsxs)("form",{className:"search-form",onSubmit:function(e){return e.preventDefault()},children:[Object(f.jsx)("h2",{children:"Search"}),Object(f.jsx)("input",{type:"text",className:"search-input",value:t,onChange:function(e){return a(e.target.value)},placeholder:"enter a topic here..."})]})},S=function(){var e=N(),t=e.isLoading,a=e.hits,c=e.hideStory,n=e.cannotFetch,r=function(e){var t=new Date(1e3*e);return"Date: "+t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()};return t?Object(f.jsxs)("section",{className:"loading-box",children:[Object(f.jsx)("div",{className:"loading"}),Object(f.jsx)("h4",{children:"Fetching content..."})]}):n?Object(f.jsxs)("section",{className:"error-box",children:[Object(f.jsx)("h2",{children:"Failed to fetch content"}),Object(f.jsx)("p",{children:"Check your network settings and refresh your browser"})]}):Object(f.jsx)("section",{className:"stories-box",children:a.map((function(e){var t=e.author,a=e.created_at_i,n=e.title,s=e.objectID,i=e.num_comments,o=e.url;return Object(f.jsxs)("article",{className:"single-story",children:[Object(f.jsx)("h1",{className:"story-headline",children:n||"Story headline unavailable"}),Object(f.jsxs)("div",{className:"story-info",children:[Object(f.jsxs)("p",{className:"story-details",children:["Author: ",Object(f.jsx)("span",{className:"author-name",children:t})," |","  ",r("".concat(a))," |"," ",Object(f.jsxs)("span",{children:[i," comments"]})]}),Object(f.jsxs)("p",{className:"story-cta",children:[Object(f.jsx)("a",{href:o,target:"_blank",rel:"noopener noreferrer",children:"Read More"}),Object(f.jsx)("button",{className:"hide-btn",onClick:function(){return c(s)},children:"Hide"})]})]})]},s)}))})},P=function(){var e=N(),t=e.isLoading,a=e.pageSwitch,c=e.page,n=e.nbPages;return Object(f.jsxs)("div",{className:"buttons-box",children:[Object(f.jsx)("button",{className:"switch-btn",disabled:t,onClick:function(){return a("decrease")},children:"Prev Page"}),Object(f.jsxs)("p",{className:"page-number",children:[c+1," of ",n]}),Object(f.jsx)("button",{className:"switch-btn",disabled:t,onClick:function(){return a("increase")},children:"Next Page"})]})},E=function(){return Object(f.jsx)("header",{className:"header",children:Object(f.jsxs)("nav",{children:[Object(f.jsx)("h2",{children:"TechNews"}),Object(f.jsx)("p",{children:"...wholesome, accurate & reliable"})]})})},k=function(){var e=N().isLoading;return Object(f.jsxs)("div",{className:"main-wrapper",children:[Object(f.jsx)(E,{}),Object(f.jsxs)("main",{className:"wrapper",children:[Object(f.jsx)(w,{}),Object(f.jsx)(S,{}),!e&&Object(f.jsx)(P,{})]})]})};s.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(v,{children:Object(f.jsx)(k,{})})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.b5ff5b64.chunk.js.map